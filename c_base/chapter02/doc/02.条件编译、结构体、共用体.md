## 一、条件编译

编译器根据条件的真假决定是否编译相关的代码，常见的条件编译有两种方法：

- 宏是否定义
- 宏的值

### （一）宏是否定义

**语法**：

```c
#ifdef  <macro>
 		  ……
#else
  		  ……
#endif
```

```c
#include <stdio.h>

#define _DEBUG_

int main(int argc, char *argv[]) {


    #ifdef _DEBUG_
    printf("The macro _DEBUG_ is defined\n");
    #else
    printf("The macro _DEBUG_ is not defined\n");
    #endif

}
```

### （二）宏的值

**语法**：

```c
#if  <macro>
           ……
#else
		   ……
#endif

```

```c
#include <stdio.h>

#define _DEBUG_ 1

int main(int argc, char *argv[]) {

    #if _DEBUG_
        printf("The macro _DEBUG_ is defined\n");
    #else
        printf("The macro _DEBUG_ is not defined\n");
    #endif
    
}
```

## 二、结构体

### （一）简述

在实际的处理对象中，有许多信息是由多个不同类型的数据组合在一起进行描述，而且这些不同类型的数据是互相联系组成了一个有机的整体。此时，就要用到一种新的构造类型数据——结构体（structure），简称结构。

结构体的使用为处理复杂的数据结构（如动态数据结构等）提供了有效的手段，而且，它们为函数间传递不同类型的数据提供了方便。

### （二）概念

结构体是用户自定义的新数据类型，在结构体中可以包含若干个不同数据类型和不同意义的数据项（当然也可以相同），从而使这些数据项组合起来反映某一个信息。

例如，可以定义一个职工worker结构体，在这个结构体中包括职工编号、姓名、性别、年龄、工资、家庭住址、联系电话。这样就可以用一个结构体数据类型的变量来存放某个职工的所有相关信息。并且，用户自定义的数据类型worker也可以与int、double等基本数据类型一样，用来作为定义其他变量的数据类型。

### （三）定义

```c
struct  结构体名
{
数据类型　　　成员名1；
数据类型　　　成员名2；
：
.
数据类型　　　成员名n；
}；

```

- 在大括号中的内容也称为“成员列表”或“域表”。

- 其中，每个成员名的命名规则与变量名相同；

- 数据类型可以是基本变量类型和数组类型，或者是一个结构体类型；

- 用分号“；”作为结束符。整个结构的定义也用分号作为结束符 

例如：

```c
struct worker {
    long number;
    char name[20];
    char sex;
    int age;
    float salary;
    char address[80];
};
```

说明：

结构体类型中的成员名可以与程序中的变量名相同，二者并不代表同一对象，编译程序可以自动对它们进行区分。 

最后，总结一下结构体类型的特点：

- 结构体类型是用户自行构造的。

- 它由若干不同的基本数据类型的数据构成。
- 它属于C语言的一种数据类型，与整型、实型相当。因此，定义它时不分配空间，只有用它定义变量时才分配空间。 

### （四）结构体变量

- 方式一：定义类型同时定义变量

这种形式的定义的一般形式为：

```c
struct 结构体名
		{
 	     成员列表；
		}变量名； 

```

例如：

```c
struct worker {
    long number;
    char name[20];
    char sex;
    int age;
    float salary;
    char address[80];
} worker1, worker2;
```

- 方式二：直接定义结构类型变量

这种形式的定义的一般形式为：

```c
struct      //没有结构体名
	 {
       成员列表；
	  }变量名； 

```

列如：

```c
struct {
    long number;
    char name[20];
    char sex;
    int age;
    float salary;
    char address[80];
} worker1, worker2;
```

- 方式三：符号常量代表结构体类型

```c
#define WORKER struct worker; // WORKER与struct worker完全等效

WORKER {
    long number;
    char name[20];
    char sex;
    int age;
    float salary;
    char address[80];
};
WORKER worker1, worker2;
```

### （五）结构体使用方式

#### 1、大小

一个结构体变量占用内存的实际大小，也可以利用sizeof求出。它的运算表达式为：

```c
  sizeof（运算量） //求出给定的运算量占用内存空间的字节数
```

  其中运算量可以是变量、数组或结构体变量，可以是数据类型的名称。 

  例如：

```c
#include <stdio.h>

#define WORKER struct worker // WORKER与struct worker完全等效

WORKER
{
    long number;
    char name[20];
    char sex;
    int age;
    float salary;
    char address[80];
};

int main(int argc, char *argv[]) {

    WORKER worker1;

    printf("%d\n",sizeof(worker1));

}
```

#### 2、结构体初始化与变量初始化

```c
#include <stdio.h>
#include <string.h>
#define N 32

struct student {

    int no;
    char name[N];
    float score;

}s3={3, "zhangsan", 90}, s4={4, "lisi", 80};

int main(int argc, char *argv[]) {

    struct student s1, s2;
    strcpy(s1.name, "xiaoming"); // 通过 strcpy 给变量赋值
    s1.score = 90; // 给分数赋值
    s1.name[0] = 'k'; //修改名称中的第一个字符
    printf("%d %s %2.f\n", s1.no, s1.name, s1.score); // -1209245696 kiaoming 90

    s2 = s1;
    s2.no = 2;
    printf("%d %s %2.f\n", s2.no, s2.name, s2.score); // 2 kiaoming 90

}
```

**结构变量的初始化**：

>与其他类型变量一样，也可以给结构体的每个成员赋初值，这称为结构体的初始化。一种是在定义结构体变量时进行初始化，语法格式如下：
>
>​    struct  结构体名 变量名={初始数据表}；
>
>  另一种是在定义结构体类型时进行结构体变量的初始化。
>
>  struct  结构体名
>
>  {
>
>​      成员列表；
>
>  }变量名={初始数据表}； 

**结构变量使用方式**：

>   在定义了结构体变量后，就可以用不同的赋值方法对结构体变量的每个成员赋值。例如：
>
>  strcpy(worker1.name,”Zhang San”);
>
>  worker1.age=26;
>
>  strcpy(worker1.phone,”1234567”);
>
>  worker1.sex=’m’;
>
>​      :
>
>​      :
>
>​     除此之外，还可以引用结构体变量成员的地址以及成员中的元素。例如：引用结构体变量成员的首地址&worker1.name；引用结构体变量成员的第二个字符worker1.name[1]；引用结构体变量的首地址&worker1。 

**注意**

>（1）不能将一个结构体类型变量作为一个整体加以引用，而只能对结构体类型变量中的各个成员分别引用。
>
>  例如，对上面定义的结构体类型变量wan，下列引用都是错误的：
>
>```c
>  cout<<wan;
>
>  cin>>wan;
>
>  但是可以如下引用：
>
>  cout<<wan.name;
>
>  cin>>wan.name; 
>```
>
>（2）如果成员本身又属一个结构体类型，则要用若干个成员运算符，一级一级地找到最低的一级成员。只能对最低级的成员进行赋值或存取以及运算。例如，对上面定义的结构体类型变量worker1，可以这样访问各成员：
>
>```c
>  worker1.age
>
>  worker1.name
>
>  worker1.birthday.year
>
>  worker1.birthday.month
>
>  worker1.birthday.day
>```
>
>  注意：不能用worker1.birthday来访问worker1变量中的成员birthday，因为birthday本身是一个结构体变量。 
>
>（3）对成员变量可以像普通变量一样进行各种运算（根据其类型决定可以进行的运算）。例如：
>
>```c
>  worker2.age=worker1.age;
>
>  sum=worker1.age+worker2.age;
>
>  worker1.age++;
>```
>
>​    （4）在数组中，数组是不能彼此赋值的，而结构体类型变量可以相互赋值。 
>
>​     在C程序中，同一结构体类型的结构体变量之间允许相互赋值，而不同结构体类型的结构体变量之间不允许相互赋值，即使两者包含有同样的成员。 

#### 3、嵌套结构体

```c
#include <stdio.h>
#include <string.h>
#define N 32

struct student {

    int no;
    char name[N];
    struct birthday{
        int year;
        int month;
        int day;
    }date;
    float score;

}s3={3, "zhangsan", 90}, s4={4, "lisi", 80};

int main(int argc, char *argv[]) {

    struct student s1;
    strcpy(s1.name, "xiaoming"); // 通过 strcpy 给变量赋值
    s1.score = 90; // 给分数赋值
    s1.name[0] = 'k'; //修改名称中的第一个字符
    s1.date.year=1993;
    s1.date.month=03;
    s1.date.day=10;
    printf("%d %s %d-%d-%d %2.f\n", s1.no, s1.name, s1.date.year, s1.date.month, s1.date.day, s1.score); // -1210147384 kiaoming 1993-3-10 90

}
```

## 三、结构体数组

### （一）定义

具有相同结构体类型的结构体变量也可以组成数组，称它们为结构体数组。结构体数组的每一个数组元素都是结构体类型的数据，它们都分别包括各个成员（分量）项。

定义结构体数组的方法和定义结构体变量的方法相仿，只需说明其为数组即可。可以采用三种方法：  

- 方式一 在定义结构体类型同时定义结构体数组

>结构体数组的定义形式如下：
>
>struct 结构体名  
>
>{
>
>​    成员表列；
>
>}数组名[元素个数]；

例如：

```c
struct student {

    char name[20];
    char sex;
    int age;
    char address[20];

}stu[3];
```

- 方式二 直接定义结构体数组

>struct          //没有结构体名
>
>{
>
>​    成员表列；
>
>  }数组名[元素个数]； 

例如：

```c
struct {

    char name[20];
    char sex;
    int age;
    char address[20];

}stu[3];
```

- 方式三 先定义结构体类型，再用它定义结构体数组

>struct 结构体名  
>
>{
>
>​    成员表列；
>
>}；
>
>struct 结构体名

```c
struct student{

    char name[20];
    char sex;
    int age;
    char address[20];

};

struct student stu[3];
```

### （二）数组初始化



## 四、结构体与指针









