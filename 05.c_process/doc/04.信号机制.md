## 一、什么是信号

#### 1、概念

信号是在软件层次上对中断机制的一种模拟，是一种异步通信方式 ，所有信号的产生及处理全部都是由内核完成的。

#### 2、信号的产生

- 按键产生

- 系统调用函数产生（比如raise， kill）

- 硬件异常

- 命令行产生 （kill）

- 软件条件（比如被0除，访问非法内存等）

#### 3、信号处理方式

- 缺省方式

- 忽略信号

- 捕捉信号

**常用信号**：

| 信号名  | 含义                                                         | 默认操作 |
| :------ | ------------------------------------------------------------ | -------- |
| SIGHUP  | 该信号在用户终端关闭时产生，通常是发给和该   终端关联的会话内的所有进程 | 终止     |
| SIGINT  | 该信号在用户键入INTR字符(Ctrl-C)时产生，内   核发送此信号送到当前终端的所有前台进程 | 终止     |
| SIGQUIT | 该信号和SIGINT类似，但由QUIT字符(通常是   Ctrl-\)来产生      | 终止     |
| SIGILL  | 该信号在一个进程企图执行一条非法指令时产生                   | 终止     |
| SIGSEV  | 该信号在非法访问内存时产生，如野指针、缓   冲区溢出          | 终止     |
| SIGPIPE | 当进程往一个没有读端的管道中写入时产生，代   表“管道断裂”    | 终止     |

| 信号名    | 含义                                                         | 默认操作 |
| --------- | ------------------------------------------------------------ | -------- |
| SIGKILL   | 该信号用来结束进程，并且不能被捕捉和忽略                     | 终止     |
| SIGSTOP   | 该信号用于暂停进程，并且不能被捕捉和忽略                     | 暂停进程 |
| SIGTSTP   | 该信号用于暂停进程，用户可键入SUSP字符(   通常是Ctrl-Z)发出这个信号 | 暂停进程 |
| SIGCONT   | 该信号让进程进入运行态                                       | 继续运行 |
| SIGALRM   | 该信号用于通知进程定时器时间已到                             | 终止     |
| SIGUSR1/2 | 该信号保留给用户程序使用                                     | 终止     |
| SIGCHLD   | 是子进程状态改变发给父进程的。                               | 忽略     |

**信号命令**：

>kill [-signal] pid
>
>killall [-u  user | prog]

**信号函数**：

```c
int kill（pid_t pid, int signum）
```

- 功能：发送信号
- 参数

>pid:  > 0:发送信号给指定进程
>
>​       = 0：发送信号给跟调用kill函数的那个进程处于同一进程组的进程。
>
>​       < -1: 取绝对值，发送信号给该绝对值所对应的进程组的所有组员。
>
>​       = -1：发送信号给，有权限发送的所有进程。
>
> signum：待发送的信号

```c
int  raise(int sig);  // 给自己发信号，等价于kill(getpid(), signo);
```



